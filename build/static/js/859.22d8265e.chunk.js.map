{"version":3,"file":"static/js/859.22d8265e.chunk.js","mappings":"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","sources":["components/pagination/index.tsx","../node_modules/@ant-design/icons-svg/es/asn/AuditOutlined.js","../node_modules/@ant-design/icons/es/icons/AuditOutlined.js","pages/message/index.tsx","utils/constants.ts"],"sourcesContent":["import { ConfigProvider, Pagination } from 'antd'\nimport React, { useEffect, useState } from 'react'\nimport zhCN from 'antd/es/locale/zh_CN';\nconst MyPagination = (props: any) => {\n  // 分页总数\n  const [total, setTotal] = useState(0)\n  // 当前第几页\n  const [currentPage, setCurrentPage] = useState(0)\n  // 每页显示条数\n  const [pageSize, setPageSize] = useState(0)\n  useEffect(() => {\n    setTotal(props.total)\n    setCurrentPage(props.currentPage)\n    setPageSize(props.pageSize)\n  }, [props])\n\n  const onChangePage = (page: number, pageSize: number) => {\n    // 将切换的页码参数传递过去\n    props.onChange(page, pageSize)\n  }\n  return (\n    <div>\n      {/* 中文语言包 */}\n      < ConfigProvider locale={zhCN} >\n        <Pagination\n          style={{ marginTop: \"10px\" }}\n          current={currentPage} // 当前页\n          pageSize={pageSize} // 每页条数\n          total={total} // 数据总数\n          pageSizeOptions={[5, 10, 50, 100]} // 每页显示多少条\n          onChange={onChangePage} // 监听pageSize回调\n          showSizeChanger // 展示 pageSize 切换器\n          showQuickJumper // 快速跳转至某页\n          showTotal={total => `共有 ${total} 条数据`} // 展示页码\n        />\n      </ConfigProvider >\n    </div>\n  )\n}\nexport default MyPagination\n","// This icon file is generated automatically.\nvar AuditOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M296 250c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm184 144H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-48 458H208V148h560v320c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm440-88H728v-36.6c46.3-13.8 80-56.6 80-107.4 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 50.7 33.7 93.6 80 107.4V764H520c-8.8 0-16 7.2-16 16v152c0 8.8 7.2 16 16 16h352c8.8 0 16-7.2 16-16V780c0-8.8-7.2-16-16-16zM646 620c0-27.6 22.4-50 50-50s50 22.4 50 50-22.4 50-50 50-50-22.4-50-50zm180 266H566v-60h260v60z\" } }] }, \"name\": \"audit\", \"theme\": \"outlined\" };\nexport default AuditOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport AuditOutlinedSvg from \"@ant-design/icons-svg/es/asn/AuditOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar AuditOutlined = function AuditOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: AuditOutlinedSvg\n  }));\n};\nAuditOutlined.displayName = 'AuditOutlined';\nexport default /*#__PURE__*/React.forwardRef(AuditOutlined);","import React, { useEffect, useState } from 'react';\nimport { Badge, Button, Form, message, Modal, Radio, Space, Table } from 'antd';\nimport type { ColumnsType } from 'antd/es/table';\nimport { DeleteOutlined, ExclamationCircleOutlined, AuditOutlined } from '@ant-design/icons';\nimport { connect } from 'react-redux';\nimport { Dispatch, bindActionCreators } from 'redux';\nimport * as BlogActions from '@/redux/actionCreator';\nimport MyPagination from '@/components/pagination';\nimport { auditStatusOptions } from '@/utils/constants';\nimport dayjs from 'dayjs';\nimport jwtDecode from 'jwt-decode';\nimport './index.less';\nconst { confirm } = Modal;\ninterface DataType {\n  key?: React.Key;\n  _id: string;\n  nickName?: string;\n  avatar?: string;\n  messageTime: string;\n  auditTime: string;\n  children?: DataType[] | string | undefined;\n}\ninterface MessageData {\n  _id: string;\n  totalCount: number;\n  page: number;\n  pageSize: number;\n  data: DataType[];\n}\nconst Message = (props: any) => {\n  const token = jwtDecode(localStorage.getItem('token') as string) as object | any;\n  const role_type = token[0].role[0].role_type\n  const columns: ColumnsType<DataType> = [\n    {\n      title: '昵称',\n      dataIndex: 'nickName',\n      width: 100,\n    },\n    {\n      title: '邮箱',\n      dataIndex: 'email',\n      width: 100,\n    },\n    {\n      title: '当前回复内容',\n      dataIndex: 'currentReplayContent',\n    },\n    // {\n    //   title: '目标回复ID',\n    //   dataIndex: 'targetReplayId',\n    // },\n    {\n      title: '目标回复内容',\n      dataIndex: 'targetReplayContent',\n    },\n    {\n      title: '审核状态',\n      dataIndex: 'auditStatus',\n      width: 80,\n      render: status => {\n        const current = auditStatusOptions.filter(item => item.value === +status);\n        const enums: any = {\n          1: 'success',\n          2: 'error',\n          3: 'warning',\n        };\n        return (\n          <Space direction=\"vertical\">\n            <Badge status={enums[current[0].value]} text={current[0].label} />\n          </Space>\n        );\n      },\n    },\n\n    {\n      title: '留言时间',\n      dataIndex: 'messageTime',\n      render: time => {\n        return dayjs(time * 1000).format('YYYY-MM-DD HH:mm:ss');\n      },\n    },\n    {\n      title: '审核时间',\n      dataIndex: 'auditTime',\n      render: time => {\n        return time && dayjs(time * 1000).format('YYYY-MM-DD HH:mm:ss');\n      },\n    },\n    {\n      title: '操作',\n      key: 'action',\n      fixed: 'right',\n      width: 120,\n      render: item => {\n        return (\n          <div>\n            <Button\n              type=\"primary\"\n              danger\n              shape=\"circle\"\n              icon={<DeleteOutlined />}\n              disabled={role_type}\n              onClick={() => {\n                messageDelete(item);\n              }}\n              style={{ marginRight: '5px' }}\n            />\n            <Button\n              type=\"primary\"\n              shape=\"circle\"\n              icon={<AuditOutlined />}\n              onClick={() => {\n                messageAudit(item);\n              }}\n              style={{ marginRight: '5px' }}\n              disabled={role_type ? role_type : !item.children}\n            ></Button>\n          </div>\n        );\n      },\n    },\n  ];\n\n  // 留言列表\n  const [list, setList] = useState<DataType[]>([]);\n  // 分页总数\n  const [total, setTotal] = useState(0);\n  // 当前第几页\n  const [currentPage, setCurrentPage] = useState(1);\n  // 每页显示条数\n  const [pageSize, setPageSize] = useState(10);\n  // 窗口\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  // 表单数据\n  const [form] = Form.useForm();\n  // 将id值存放\n  const [id, setId] = useState();\n  // 点击审核时获取到的数据列表\n  const [auditContent, setAuditContent] = useState<any>();\n  // 获取留言列表数据\n  useEffect(() => {\n    props.BlogActions.asyncMessageListAction(currentPage, pageSize, 0).then((res: MessageData) => {\n      // 获取留言\n      let { data, totalCount, page, pageSize } = res.data as unknown as MessageData;\n      // 无子节点情况下，按钮\n      data.forEach((item: any) => {\n        if (item.children.length === 0) {\n          item.children = '';\n        }\n      });\n      setList(data);\n      setTotal(totalCount);\n      setCurrentPage(page);\n      setPageSize(pageSize);\n    });\n  }, [currentPage, pageSize, props.BlogActions]);\n\n  // 删除留言\n  const messageDelete = (item: { _id: string; }) => {\n    confirm({\n      title: '你确定要删除吗?',\n      icon: <ExclamationCircleOutlined />,\n      onOk() {\n        // 先将要删除的数据过滤掉再调用接口\n        setList(list.filter((it) => it._id !== item._id));\n        message.success('留言删除成功');\n        props.BlogActions.asyncMessageDeleteAction(item._id).then(() => {\n          props.BlogActions.asyncMessageListAction(currentPage, pageSize, 0).then((res: MessageData) => {\n            // 获取留言\n            let { data, totalCount, page, pageSize } = res.data as unknown as MessageData;\n            setList(data);\n            setTotal(totalCount);\n            setCurrentPage(page);\n            setPageSize(pageSize);\n          });\n        });\n      },\n    });\n  };\n  // 审核\n  const messageAudit = (item: { _id: any; auditStatus?: any; }) => {\n    setTimeout(() => {\n      form.setFieldsValue({\n        auditStatus: +item.auditStatus,\n      });\n    }, 100);\n    setAuditContent(item);\n    setId(item._id);\n    setIsModalOpen(true);\n  };\n  const status: any = {\n    1: '通过',\n    2: '驳回',\n  };\n  // 点击确定\n  const handleConfirm = async () => {\n    await form.validateFields();\n    const val = form.getFieldsValue();\n\n    // 一键审核\n    if (id === 0) {\n      props.BlogActions.asyncMessageStatusUpdateAction({\n        auditStatus: val.auditStatus,\n        id: id,\n      }).then(() => {\n        props.BlogActions.asyncMessageListAction(currentPage, pageSize, 0).then((res: MessageData) => {\n          // 获取留言\n          let { data, totalCount, page, pageSize } = res.data as unknown as MessageData;\n          setList(data);\n          setTotal(totalCount);\n          setCurrentPage(page);\n          setPageSize(pageSize);\n        });\n        message.success(`一键审核${status[val.auditStatus]}成功`);\n        form.resetFields();\n        setIsModalOpen(false);\n      });\n    } else {\n      if (auditContent.children) {\n        auditContent?.children.map((audit: MessageData) =>\n          props.BlogActions.asyncMessageStatusUpdateAction({\n            auditStatus: val.auditStatus,\n            id: audit._id,\n          })\n        );\n        //父节点数据\n        props.BlogActions.asyncMessageStatusUpdateAction({\n          auditStatus: val.auditStatus,\n          id: id,\n        }).then(() => {\n          props.BlogActions.asyncMessageListAction(currentPage, pageSize, 0).then((res: MessageData) => {\n            // 获取留言\n            let { data, totalCount, page, pageSize } = res.data as unknown as MessageData;\n            setList(data);\n            setTotal(totalCount);\n            setCurrentPage(page);\n            setPageSize(pageSize);\n          });\n          message.success(`审核${status[val.auditStatus]}成功`);\n          form.resetFields();\n          setIsModalOpen(false);\n        });\n      } else {\n        //父节点数据\n        props.BlogActions.asyncMessageStatusUpdateAction({\n          auditStatus: val.auditStatus,\n          id: id,\n        }).then(() => {\n          props.BlogActions.asyncMessageListAction(currentPage, pageSize, 0).then((res: MessageData) => {\n            // 获取留言\n            let { data, totalCount, page, pageSize } = res.data as unknown as MessageData;\n            setList(data);\n            setTotal(totalCount);\n            setCurrentPage(page);\n            setPageSize(pageSize);\n          });\n          message.success(`审核${status[val.auditStatus]}成功`);\n          form.resetFields();\n          setIsModalOpen(false);\n        });\n      }\n    }\n  };\n  // 关闭窗口\n  const handleCancel = () => {\n    form.resetFields();\n    setIsModalOpen(false);\n  };\n\n  // 跳转页数据显示\n  const onChangePage = (page: number, pageSize: number, params = '') => {\n    // 重新调用接口将参数传递过去\n    props.BlogActions.asyncCommentsAction(page, pageSize, params).then((res: MessageData) => {\n      // 获取列表数据\n      let { data } = res.data as unknown as MessageData;\n      setList(data);\n      // 切换行\n      setCurrentPage(page);\n      // 根据页面数据显示页码\n      setPageSize(pageSize);\n    });\n  };\n  return (\n    <div>\n      <div className=\"cate_title\">\n        <Button type=\"primary\" disabled={role_type} onClick={() => messageAudit({ _id: 0 })}>\n          一键审核\n        </Button>\n        {/* <div className=\"cate_search\">\n          <Select defaultValue={0} style={{ width: 120 }} options={auditStatusOptions}></Select>\n          <Search className=\"search\" allowClear placeholder=\"请输入留言名称\" enterButton />\n        </div> */}\n      </div>\n      <Modal\n        open={isModalOpen}\n        title={<div style={{ textAlign: 'left' }}>添加审核</div>}\n        okText=\"新增\"\n        cancelText=\"取消\"\n        onCancel={handleCancel}\n        onOk={() => {\n          handleConfirm();\n        }}\n      >\n        <Form form={form} layout=\"vertical\" name=\"basic\" className=\"userAddFrom\">\n          <Form.Item name=\"auditStatus\" rules={[{ required: true, message: '请选择审核状态' }]}>\n            <Radio.Group>\n              <Radio value={1}>通过</Radio>\n              <Radio value={2}>驳回</Radio>\n            </Radio.Group>\n          </Form.Item>\n        </Form>\n      </Modal>\n      <Table\n        rowKey={(item) => {\n          return item._id;\n        }}\n        columns={columns}\n        dataSource={list}\n        expandRowByClick={true}\n        defaultExpandAllRows={true}\n        pagination={false}\n      />\n      <MyPagination\n        pageSize={pageSize}\n        currentPage={currentPage}\n        total={total}\n        onChange={onChangePage}\n      ></MyPagination>\n    </div>\n  );\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch) => {\n  return {\n    BlogActions: bindActionCreators(BlogActions, dispatch),\n  };\n};\nexport default connect(null, mapDispatchToProps)(Message);\n","export const colors = [\n  'red',\n  'orangered',\n  'orange',\n  'gold',\n  'lime',\n  'green',\n  'cyan',\n  'blue',\n  'pinkpurple',\n  'magenta',\n];\nexport const auditStatusOptions = [\n  {\n    value: 0,\n    label: '全部',\n  },\n  {\n    value: 1,\n    label: '通过',\n  },\n  {\n    value: 2,\n    label: '驳回',\n  },\n  {\n    value: 3,\n    label: '未审核',\n  },\n];\nexport const statusPublish = [\n  {\n    value: 0,\n    label: '全部',\n  },\n  {\n    value: 1,\n    label: '已发布',\n  },\n  {\n    value: 2,\n    label: '未发布',\n  },\n];\n// 图片格式\nexport const imagesType = ['image/jpeg', 'image/webp', 'image/jpg', 'image/png', 'image/gif'];\n"],"names":["props","useState","total","setTotal","currentPage","setCurrentPage","pageSize","setPageSize","useEffect","locale","zhCN","style","marginTop","current","pageSizeOptions","onChange","page","showSizeChanger","showQuickJumper","showTotal","AuditOutlined","ref","React","AntdIcon","_objectSpread","icon","AuditOutlinedSvg","displayName","confirm","Modal","connect","dispatch","BlogActions","bindActionCreators","role_type","jwtDecode","localStorage","getItem","role","columns","title","dataIndex","width","render","status","auditStatusOptions","item","value","direction","text","label","time","dayjs","format","key","fixed","type","danger","shape","DeleteOutlined","disabled","onClick","messageDelete","marginRight","messageAudit","children","list","setList","isModalOpen","setIsModalOpen","Form","form","id","setId","auditContent","setAuditContent","asyncMessageListAction","then","res","data","totalCount","forEach","length","ExclamationCircleOutlined","onOk","filter","it","_id","message","asyncMessageDeleteAction","setTimeout","setFieldsValue","auditStatus","handleConfirm","validateFields","val","getFieldsValue","asyncMessageStatusUpdateAction","resetFields","map","audit","className","open","textAlign","okText","cancelText","onCancel","layout","name","rules","required","rowKey","dataSource","expandRowByClick","defaultExpandAllRows","pagination","params","asyncCommentsAction","statusPublish"],"sourceRoot":""}