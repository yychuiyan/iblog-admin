"use strict";(self.webpackChunkiblog_admin=self.webpackChunkiblog_admin||[]).push([[119],{482:function(e,t,n){var a=n(9439),i=n(8848),r=n(9016),c=n(2791),s=n(6211),o=n(184);t.Z=function(e){var t=(0,c.useState)(0),n=(0,a.Z)(t,2),u=n[0],l=n[1],d=(0,c.useState)(0),f=(0,a.Z)(d,2),h=f[0],m=f[1],g=(0,c.useState)(0),Z=(0,a.Z)(g,2),p=Z[0],x=Z[1];(0,c.useEffect)((function(){l(e.total),m(e.currentPage),x(e.pageSize)}),[e]);return(0,o.jsx)("div",{children:(0,o.jsx)(i.ZP,{locale:s.Z,children:(0,o.jsx)(r.Z,{style:{marginTop:"10px"},current:h,pageSize:p,total:u,pageSizeOptions:[5,10,50,100],onChange:function(t,n){e.onChange(t,n)},showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return"\u5171\u6709 ".concat(e," \u6761\u6570\u636e")}})})})}},7119:function(e,t,n){n.r(t),n.d(t,{default:function(){return Y}});var a=n(3433),i=n(4165),r=n(5861),c=n(4942),s=n(1413),o=n(9439),u=n(5987),l=n(2791),d=n(9428),f=n(940),h=n(7863),m=n(1306),g=n(7309),Z=n(6988),p=n(4476),x=n(7575),v=n(732),j=n(2622),y=n(5796),A=n(8687),S=n(7781),k=n(8863),C=n(482),T=n(7892),b=n.n(T),w=n(184),B=["index"],_=["title","editable","children","dataIndex","record","handleSave"],I=d.Z.confirm,N=f.Z.Search,P=l.createContext(null),z=function(e){e.index;var t=(0,u.Z)(e,B),n=h.Z.useForm(),a=(0,o.Z)(n,1)[0];return(0,w.jsx)(h.Z,{form:a,component:!1,children:(0,w.jsx)(P.Provider,{value:a,children:(0,w.jsx)("tr",(0,s.Z)({},t))})})},F=function(e){var t=e.title,n=e.editable,a=e.children,d=e.dataIndex,m=e.record,g=e.handleSave,Z=(0,u.Z)(e,_),p=(0,l.useState)(!1),x=(0,o.Z)(p,2),v=x[0],j=x[1],y=(0,l.useRef)(null),A=(0,l.useContext)(P);(0,l.useEffect)((function(){v&&y.current.focus()}),[v]);var S=function(){j(!v),A.setFieldsValue((0,c.Z)({},d,m[d]))},k=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.validateFields();case 3:t=e.sent,S(),g((0,s.Z)((0,s.Z)({},m),t)),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),C=a;return n&&(C=v?(0,w.jsx)(h.Z.Item,{style:{margin:0},name:d,rules:[{required:!0,message:"".concat(t," is required.")}],children:(0,w.jsx)(f.Z,{ref:y,onPressEnter:k,onBlur:k})}):(0,w.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:S,children:a})),(0,w.jsx)("td",(0,s.Z)((0,s.Z)({},Z),{},{children:C}))},Y=(0,A.$j)(null,(function(e){return{BlogActions:(0,S.DE)(k,e)}}))((function(e){var t=function(t){var n=S.map((function(e){return e._id===t._id?{_id:e._id,name:t.name,articleNum:t.articleNum,createTime:t.createTime,updateTime:t.updateTime}:e}));k(n),e.BlogActions.asyncTagUpdateAction({name:t.name,id:t._id}).then((function(){e.BlogActions.asyncTagsAction(E,O,"").then((function(e){var t=e.data,n=t.data,a=t.totalCount,i=t.page,r=t.pageSize;k(n),P(a),H(i),R(r)}))}))},n=[{title:"\u6807\u7b7e\u540d\u79f0(\u70b9\u51fb\u53ef\u7f16\u8f91)",dataIndex:"name",key:"name",onCell:function(e){return{record:e,editable:e.status,dataIndex:"name",title:"\u6807\u7b7e\u540d\u79f0",handleSave:t}}},{title:"\u6587\u7ae0\u6570\u91cf",dataIndex:"articleNum",key:"articleNum"},{title:"\u6807\u7b7e\u72b6\u6001",dataIndex:"articleNum",render:function(e,t){return(0,w.jsx)(m.Z,{checkedChildren:(0,w.jsx)(x.Z,{}),unCheckedChildren:(0,w.jsx)(v.Z,{}),checked:t.status,onChange:function(e){return G(e,t)}})}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createTime",key:"createTime",render:function(e){return e&&b()(1e3*e).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"updateTime",key:"updateTime",render:function(e){return e&&b()(1e3*e).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u64cd\u4f5c",key:"action",render:function(e){return(0,w.jsx)("div",{children:(0,w.jsx)(g.Z,{type:"primary",danger:!0,shape:"circle",icon:(0,w.jsx)(j.Z,{}),onClick:function(){$(e)},style:{marginRight:"5px"},disabled:e.status})})}}],c=h.Z.useForm(),s=(0,o.Z)(c,1)[0],u=(0,l.useState)([]),A=(0,o.Z)(u,2),S=A[0],k=A[1],T=(0,l.useState)(0),B=(0,o.Z)(T,2),_=B[0],P=B[1],Y=(0,l.useState)(1),D=(0,o.Z)(Y,2),E=D[0],H=D[1],M=(0,l.useState)(10),q=(0,o.Z)(M,2),O=q[0],R=q[1],U=(0,l.useState)(!1),V=(0,o.Z)(U,2),J=V[0],K=V[1];(0,l.useEffect)((function(){e.BlogActions.asyncTagsAction(E,O,"").then((function(e){var t=e.data,n=t.data,a=t.totalCount,i=t.page,r=t.pageSize;k(n),P(a),H(i),R(r)}))}),[E,O,e.BlogActions]);var Q=function(){var t=(0,r.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.validateFields();case 2:n=s.getFieldsValue(),Z.ZP.success("\u6807\u7b7e\u65b0\u589e\u6210\u529f"),s.resetFields(),K(!1),e.BlogActions.asyncTagAddAction({name:n.title}).then((function(t){e.BlogActions.asyncTagsAction(E,O,"").then((function(e){var t=e.data.data;k(t)}))}));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),$=function(t){I({title:"\u4f60\u786e\u5b9a\u8981\u5220\u9664\u5417?",icon:(0,w.jsx)(y.Z,{}),onOk:function(){e.BlogActions.asyncTagDeleteAction(t._id).then((function(n){if(40001===n.code)return Z.ZP.error("\u6587\u7ae0\u4e2d\u6709\u5173\u8054\u8be5\u6807\u7b7e\u4fe1\u606f\uff0c\u8bf7\u89e3\u7ed1\u540e\u518d\u6b21\u6267\u884c\u5220\u9664\u64cd\u4f5c"),!1;k(S.filter((function(e){return e._id!==t._id}))),Z.ZP.success("\u6807\u7b7e\u5220\u9664\u6210\u529f"),e.BlogActions.asyncTagsAction(E,O,"").then((function(e){var t=e.data,n=t.data,a=t.totalCount,i=t.page,r=t.pageSize;k(n),P(a),H(i),R(r)}))}))}})},G=function(t,n){e.BlogActions.asyncTagStatusUpdateAction({status:n.status,id:n._id}).then((function(e){if(40001===e.code)return Z.ZP.error("\u6587\u7ae0\u4e2d\u6709\u5173\u8054\u8be5\u6807\u7b7e\u4fe1\u606f\uff0c\u8bf7\u89e3\u7ed1\u540e\u518d\u6b21\u6267\u884c\u72b6\u6001\u53d8\u66f4\u64cd\u4f5c"),!1;n.status=!n.status,k((0,a.Z)(S)),Z.ZP.success("\u72b6\u6001\u66f4\u65b0\u6210\u529f")}))};return(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{className:"cate_title",children:[(0,w.jsx)(g.Z,{type:"primary",onClick:function(){K(!0)},className:"btn",children:"\u65b0\u589e\u6807\u7b7e"}),(0,w.jsx)(N,{className:"search",allowClear:!0,placeholder:"\u8bf7\u8f93\u5165\u6807\u7b7e\u540d\u79f0",onSearch:function(t){e.BlogActions.asyncTagsAction(E,O,t).then((function(e){var t=e.data,n=t.data,a=t.totalCount,i=t.page,r=t.pageSize;k(n),P(a),H(i),R(r)}))},enterButton:!0})]}),(0,w.jsx)(d.Z,{open:J,title:(0,w.jsx)("div",{style:{textAlign:"left"},children:"\u6dfb\u52a0\u6807\u7b7e"}),okText:"\u65b0\u589e",cancelText:"\u53d6\u6d88",onCancel:function(e){s.resetFields(),K(!1)},onOk:function(){Q()},children:(0,w.jsx)(h.Z,{form:s,layout:"vertical",name:"basic",className:"userAddFrom",children:(0,w.jsx)(h.Z.Item,{name:"title",label:"\u540d\u79f0",rules:[{required:!0,message:"\u6807\u7b7e\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"}],children:(0,w.jsx)(f.Z,{})})})}),(0,w.jsx)(p.Z,{columns:n,dataSource:S,rowKey:function(e){return e._id+Date.now()},pagination:!1,components:{body:{row:z,cell:F}}}),(0,w.jsx)(C.Z,{pageSize:O,currentPage:E,total:_,onChange:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.BlogActions.asyncTagsAction(t,n,a).then((function(e){var a=e.data.data;k(a),H(t),R(n)}))}})]})}))}}]);
//# sourceMappingURL=119.9c4d6b49.chunk.js.map