{"version":3,"file":"static/js/15.5b7b23f3.chunk.js","mappings":"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","sources":["components/layout/sidemenu/index.tsx","components/layout/header/index.tsx","pages/layout/index.tsx"],"sourcesContent":["import { Layout, Menu } from 'antd';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as BlogActions from '@/redux/actionCreator';\nimport { withRouter } from 'react-router-dom';\nimport jwtDecode from 'jwt-decode';\nimport {\n  // HomeOutlined,\n  // HighlightOutlined,\n  // MessageOutlined,\n  // EditOutlined,\n  // LinkedinOutlined,\n  // NotificationOutlined,\n  // UserOutlined\n} from '@ant-design/icons';\nimport './index.less';\nimport { useEffect, useState } from 'react';\ninterface DataType {\n  rightsid: any;\n  key: React.Key;\n  _id: string;\n  index: number;\n  title: string;\n  pagepermission: number;\n  grade: number;\n  createtime: number;\n  updatetime: number;\n  children: DataType[] | string;\n}\n// interface RightsData {\n//   data: DataType[];\n// }\nconst { Sider } = Layout;\n// const items = [\n//   {\n//     key: '/admin/home',\n//     icon: <HomeOutlined />,\n//     label: '首页',\n//   },\n//   {\n//     key: '/admin/article',\n//     icon: <HighlightOutlined />,\n//     label: '文章管理',\n//     children: [\n//       {\n//         key: '/admin/article/list',\n//         label: '文章列表',\n//       },\n//       {\n//         key: '/admin/article/insert',\n//         label: '编写文章',\n//       },\n//       {\n//         key: '/admin/article/comment',\n//         label: '评论管理',\n//       },\n//       {\n//         key: '/admin/article/category',\n//         label: '文章分类',\n//       },\n//       {\n//         key: '/admin/article/tags',\n//         label: '标签信息',\n//       },\n//     ],\n//   },\n//   {\n//     key: '/admin/permission',\n//     icon: <HighlightOutlined />,\n//     label: '权限管理',\n//     children: [\n//       {\n//         key: '/admin/permission/list',\n//         label: '权限列表',\n//       },\n//       {\n//         key: '/admin/rule/list',\n//         label: '角色管理',\n//       }\n//     ],\n//   },\n\n//   {\n//     key: '/admin/userinfo',\n//     icon: <UserOutlined />,\n//     label: '用户管理',\n//   },\n//   {\n//     key: '/admin/message',\n//     icon: <MessageOutlined />,\n//     label: '留言管理',\n//   },\n//   {\n//     key: '/admin/friendly',\n//     icon: <LinkedinOutlined />,\n//     label: '友链管理',\n//   },\n//   {\n//     key: '/admin/essay',\n//     icon: <EditOutlined />,\n//     label: '随笔',\n//   },\n//   {\n//     key: '/admin/about',\n//     icon: <NotificationOutlined />,\n//     label: '关于管理',\n//   },\n// ];\n// icon\n// const iconList = {\n//   '/admin/home': <HomeOutlined />,\n// }\n\nconst SideMenu = (props: any) => {\n  const token = jwtDecode(localStorage.getItem('token') as string) as object | any;\n  const { role } = token[0]\n\n  // 路由列表\n  const [items, setItems] = useState<DataType[]>([])\n  // 获取权限列表\n  useEffect(() => {\n    props.BlogActions.asyncRightsListAction().then((res: any) => {\n      // 获取权限\n      let { data } = res.data;\n      // 根据pagepermission字段将页面需要的权限展示\n      data.map((item: any, index: number) => {\n        if (item.children.length < 1) {\n          return data[index].children = \"\"\n        } else {\n          const itemChildren = item.children.filter((it: any) => it.pagepermission === 1)\n          return item.children = itemChildren\n        }\n      })\n      let dataFilter = data.filter((data: DataType) => data.pagepermission === 1 && role[0].rights.includes(data.key))\n\n      setItems(dataFilter);\n    });\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.BlogActions]);\n\n  // 获取动态路由信息\n  const selectKeys = [props.location.pathname];\n\n  // 截取路由信息，折叠页面自动打开\n  const openKeys = ['/admin/' + props.location.pathname.split('/')[2]];\n\n  // 获取路由列表\n  // 点击切换路由\n  const handleItemClick = (e: { keyPath: any[]; }) => {\n    let path = e.keyPath[0];\n    props.history.push(path);\n  };\n  return (\n    // 折叠展开\n    <Sider trigger={null} collapsible collapsed={props.isCollapsed}>\n      <div className=\"logo\">\n        {/* <img src=\"https://gw.alipayobjects.com/zos/rmsportal/KDpgvguMpGfqaHPjicRK.svg\" alt=\"\" /> */}\n        <div className=\"logo_text\">夜雨炊烟</div>\n      </div>\n      <Menu\n        theme=\"dark\"\n        mode=\"inline\"\n        defaultSelectedKeys={['/admin/home']}\n        selectedKeys={selectKeys}\n        onClick={handleItemClick}\n        defaultOpenKeys={openKeys}\n        items={items}\n      ></Menu>\n    </Sider>\n  );\n};\n\nconst mapDispatchToProps = (dispatch: any) => {\n  return {\n    BlogActions: bindActionCreators(BlogActions, dispatch),\n  };\n};\nconst mapStateToProps = (state: any) => {\n  return {\n    userinfo: state.LoginReducer.userinfo,\n    isCollapsed: state.SideMenuStateReducer.isCollapsed,\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(SideMenu));\n","import { Layout, Dropdown, message, Avatar } from 'antd';\nimport { MenuUnfoldOutlined, MenuFoldOutlined } from '@ant-design/icons';\nimport type { MenuProps } from 'antd';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as BlogActions from '@/redux/actionCreator';\nimport './index.less';\nimport { useEffect, useState } from 'react';\nimport jwtDecode from 'jwt-decode';\nconst { Header } = Layout;\nconst TopHeader = (props: any) => {\n  // 用户信息\n  const [username, setUserName] = useState();\n  useEffect(() => {\n    // 解析token\n    //@ts-ignore\n    let username = jwtDecode(localStorage.getItem('token'))[0].username;\n    setUserName(username);\n  }, []);\n  const changeCollapsed = () => {\n    // 改变状态值\n    props.ChangeCollapsed.changeCollapsed();\n  };\n  // 退出登录\n  const handQuit = () => {\n    props.BlogActions.asyncLoginOutAction().then(() => {\n      // 清空token\n      localStorage.removeItem('token');\n      message.success('退出登录');\n      // 跳转到登录页面\n      props.history.push('/admin/login');\n    });\n  };\n  const items: MenuProps['items'] = [\n    // {\n    //   label: <a href=\"https://www.antgroup.com\">个人中心</a>,\n    //   key: 'person',\n    // },\n    {\n      label: (\n        <div>\n          <div onClick={handQuit}>退出登录</div>\n        </div>\n      ),\n      key: '1',\n      danger: true,\n    },\n  ];\n  return (\n    <Header className=\"site-layout-background\" style={{ padding: '0 16px' }}>\n      {/* 获取状态 */}\n      {props.isCollapsed ? (\n        <MenuUnfoldOutlined onClick={changeCollapsed} />\n      ) : (\n        <MenuFoldOutlined onClick={changeCollapsed} />\n      )}\n      <div style={{ float: 'right', cursor: 'pointer' }}>\n          <Dropdown menu={{ items }} placement=\"bottom\">\n          <p style={{ position: 'relative', bottom: '15px' }}>\n            <Avatar size={40} className='avatar' style={{ backgroundColor: '#87d068' }}>\n              {\n                // @ts-ignore\n                username?.slice(0, 1)?.toUpperCase()\n              }\n            </Avatar>\n          </p>\n        </Dropdown>\n      </div>\n    </Header>\n  );\n};\n// 将dispatch方法映射为props\nconst mapDispatchToProps = (dispatch: any) => {\n  return {\n    BlogActions: bindActionCreators(BlogActions, dispatch),\n    // 封装一个dispatch 函数\n    ChangeCollapsed: bindActionCreators(BlogActions, dispatch),\n  };\n};\n// 将状态映射为属性\nconst mapStateToProps = (state: any) => {\n  return {\n    userinfo: state.LoginReducer.userinfo,\n    isCollapsed: state.SideMenuStateReducer.isCollapsed,\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(TopHeader));\n","import { lazy, Suspense } from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport { Layout, Spin } from 'antd';\nimport SideMenu from '@/components/layout/sidemenu';\nimport Header from '@/components/layout/header';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as BlogActions from '@/redux/actionCreator';\nimport NProgress from 'nprogress';\nimport 'nprogress/nprogress.css';\nimport './index.less';\nconst Home = lazy(() => import('@/pages/home'));\nconst NotFound = lazy(() => import('@/pages/404'));\nconst ArticleList = lazy(() => import('@/pages/articles'));\nconst PermissionList = lazy(() => import('@/pages/permission'))\nconst RuleList = lazy(() => import('@/pages/permission/RoleList'))\nconst Category = lazy(() => import('@/pages/category'));\nconst Tags = lazy(() => import('@/pages/tags'));\nconst About = lazy(() => import('@/pages/about'));\nconst Comment = lazy(() => import('@/pages/comment'));\nconst Administrator = lazy(() => import('@/pages/admin'));\nconst UserInfo = lazy(() => import('@/pages/users'));\nconst ArticleAdd = lazy(() => import('@/pages/articles/add'));\nconst ArticleUpdate = lazy(() => import('@/pages/articles/update'));\nconst Message = lazy(() => import('@/pages/message'));\nconst Friendly = lazy(() => import('@/pages/friendly'));\nconst Essay = lazy(() => import('@/pages/essay'));\nconst Affiche = lazy(() => import('@/pages/affiche'));\nconst { Content } = Layout;\nconst LayoutIndex = (props: any) => {\n  NProgress.start();\n  NProgress.done();\n  return (\n    <Layout>\n      {/*侧边栏*/}\n      <SideMenu></SideMenu>\n      <Layout className=\"site-layout\">\n        <Header></Header>\n        {/*使用content包裹内容*/}\n        <Content\n          className=\"site-layout-background\"\n          style={{\n            margin: '24px 16px',\n            padding: 24,\n            minHeight: 280,\n            overflow: 'auto',\n          }}\n        >\n          <Suspense fallback={<div></div>}>\n            <Spin size=\"large\" spinning={props.isLoading}>\n              <Switch>\n                <Route path=\"/admin/home\" component={Home}></Route>\n                <Route path=\"/admin/article/list\" component={ArticleList}></Route>\n                <Route path=\"/admin/permission/list\" component={PermissionList}></Route>\n                <Route path=\"/admin/rule/list\" component={RuleList}></Route>\n                <Route path=\"/admin/article/category\" component={Category}></Route>\n                <Route path=\"/admin/article/tags\" component={Tags}></Route>\n                <Route path=\"/admin/article/insert\" component={ArticleAdd}></Route>\n                <Route path=\"/admin/article/update/:id\" component={ArticleUpdate}></Route>\n                <Route path=\"/admin/article/comment\" component={Comment}></Route>\n                <Route path=\"/admin/about\" component={About}></Route>\n                <Route path=\"/admin/manage/list\" component={Administrator}></Route>\n                <Route path=\"/admin/user/list\" component={UserInfo}></Route>\n                <Route path=\"/admin/message\" component={Message}></Route>\n                <Route path=\"/admin/friendly\" component={Friendly}></Route>\n                <Route path=\"/admin/essay\" component={Essay}></Route>\n                <Route path=\"/admin/affiche\" component={Affiche}></Route>\n                <Route path=\"*\" component={NotFound}></Route>\n              </Switch>\n            </Spin>\n          </Suspense>\n        </Content>\n      </Layout>\n    </Layout>\n  );\n};\n\nconst mapDispatchToProps = (dispatch: any) => {\n  return {\n    BlogActions: bindActionCreators(BlogActions, dispatch),\n  };\n};\n// 将状态映射为属性\nconst mapStateToProps = (state: any) => {\n  return {\n    isLoading: state.LoadingReducer.isLoading,\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(LayoutIndex);\n"],"names":["Sider","Layout","connect","state","userinfo","LoginReducer","isCollapsed","SideMenuStateReducer","dispatch","BlogActions","bindActionCreators","withRouter","props","role","jwtDecode","localStorage","getItem","useState","items","setItems","useEffect","asyncRightsListAction","then","res","data","map","item","index","children","length","itemChildren","filter","it","pagepermission","dataFilter","rights","includes","key","selectKeys","location","pathname","openKeys","split","trigger","collapsible","collapsed","className","theme","mode","defaultSelectedKeys","selectedKeys","onClick","e","path","keyPath","history","push","defaultOpenKeys","Header","ChangeCollapsed","username","setUserName","changeCollapsed","label","asyncLoginOutAction","removeItem","message","danger","style","padding","MenuUnfoldOutlined","MenuFoldOutlined","float","cursor","menu","placement","position","bottom","size","backgroundColor","slice","toUpperCase","Home","lazy","NotFound","ArticleList","PermissionList","RuleList","Category","Tags","About","Comment","Administrator","UserInfo","ArticleAdd","ArticleUpdate","Message","Friendly","Essay","Affiche","Content","isLoading","LoadingReducer","NProgress","margin","minHeight","overflow","Suspense","fallback","spinning","component"],"sourceRoot":""}