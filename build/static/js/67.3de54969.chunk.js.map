{"version":3,"file":"static/js/67.3de54969.chunk.js","mappings":"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","sources":["components/save/index.tsx","components/upload/InputImage.tsx","components/upload/index.tsx","pages/articles/update/index.tsx","utils/prompt.ts"],"sourcesContent":["import { Card, Button } from 'antd'\nimport { ClockCircleOutlined, RedoOutlined, SaveOutlined, RollbackOutlined, ArrowLeftOutlined } from '@ant-design/icons';\nimport React from 'react'\nimport './index.less'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport dayjs from 'dayjs';\nimport jwtDecode from 'jwt-decode';\nimport { handleNotSave, handleNotSaveArticle, handleNotSaveDraft } from '@/utils/prompt';\nconst Save = (props: any) => {\n  const token = jwtDecode(localStorage.getItem('token') as string) as object | any;\n  const role_type = token[0].role[0].role_type\n  const { time, showBack, onRefresh, onSave, onBack, onDraft, onPublish } = props\n  const message = time ? `上次保存时间：${dayjs(time * 1000).format('YYYY-MM-DD HH:mm:ss')}` : `暂无操作`\n  const goBack = () => {\n    // 返回上一步\n    props.history.goBack()\n  }\n  return (\n    <div className='save'>\n      <Card className='save_card' bordered={false} style={{ width: '100%' }}>\n        <div className='save'>\n          <div>\n            <ClockCircleOutlined />\n            <span>{message}</span>\n          </div>\n          <div className='save_right'>\n            {\n              showBack && <Button onClick={onBack || goBack} type=\"primary\" ghost icon={<RollbackOutlined />} className=\"save_right_btn\">返回</Button>\n            }\n            {\n              onBack && <Button onClick={onBack} type=\"primary\" ghost icon={<ArrowLeftOutlined />} className=\"save_right_btn\">返回</Button>\n            }\n            {/* 当存在该方法时显示刷新操作并执行 */}\n            {\n              onRefresh && <Button onClick={onRefresh} type=\"primary\" ghost icon={<RedoOutlined />} className=\"save_right_btn\">刷新</Button>\n            }\n\n            {\n              onSave && <Button onClick={role_type ? handleNotSave : onSave} icon={<SaveOutlined />} className=\"save_right_btn\">更新发布</Button>\n            }\n            {\n              onDraft && <Button onClick={role_type ? handleNotSaveDraft : onDraft} icon={<SaveOutlined />} className=\"save_right_btn\">保存草稿</Button>\n            }\n            {\n              onPublish && <Button onClick={role_type ? handleNotSaveArticle : onPublish} icon={<SaveOutlined />} className=\"save_right_btn\">发布文章</Button>\n            }\n\n\n          </div>\n        </div>\n\n      </Card>\n    </div >\n  )\n}\nconst mapStateToProps = (state: any) => {\n  return {\n    isCollapsed: state.SideMenuStateReducer.isCollapsed\n  }\n}\nexport default connect(mapStateToProps, null)(withRouter(Save));\n","import React, { useEffect, useState } from 'react';\nimport { Button, Form, Input, Modal } from 'antd';\nimport jwtDecode from 'jwt-decode';\nimport { handleNotLike } from '@/utils/prompt';\nconst InputImage = (props: any) => {\n  const token = jwtDecode(localStorage.getItem('token') as string) as object | any;\n  const role_type = token[0].role[0].role_type\n  // form\n  const [form] = Form.useForm();\n  // 窗口显示隐藏\n  const [visible, setVisible] = useState(false);\n  useEffect(() => {\n    if (props.fileList.length > 0) {\n      form.setFieldsValue({\n        url: props.fileList[0].thumbUrl ? props.fileList[0].thumbUrl : '',\n      });\n    }\n  }, [form, props.fileList, props.imgUrl]);\n  // 点击确定\n  const onOk = () => {\n    if (role_type) {\n      return handleNotLike()\n    }\n    let val = form.getFieldsValue();\n    props.onChangeVal(val.url);\n    setVisible(false);\n  };\n  const onCancel = () => {\n    setVisible(false);\n  };\n  const onVisible = () => {\n    setVisible(true);\n    if (props.imgUrl.url === '') {\n      form.resetFields();\n    }\n    // 重新赋值\n    if (props.fileList.length > 0) {\n      form.setFieldsValue({\n        url: props.fileList[0].thumbUrl ? props.fileList[0].thumbUrl : '',\n      });\n    }\n  };\n  return (\n    <div>\n      <Button className=\"btn-input\" onClick={onVisible} type=\"primary\">\n        输入链接\n      </Button>\n      <div>\n        <Modal\n          forceRender\n          title={<div style={{ textAlign: 'left' }}>图片链接 </div>}\n          open={visible}\n          okText=\"添加\"\n          cancelText=\"取消\"\n          onOk={onOk}\n          onCancel={onCancel}\n        >\n          <Form form={form}>\n            <Form.Item\n              label=\"图片链接\"\n              name=\"url\"\n              rules={[{ required: true, message: '请输入图片链接' }]}\n            >\n              <Input placeholder=\"请输入图片链接\" />\n            </Form.Item>\n          </Form>\n        </Modal>\n      </div>\n    </div>\n  );\n};\n\nexport default InputImage;\n","import React, { useEffect, useState } from 'react';\nimport { PlusOutlined } from '@ant-design/icons';\nimport { message, Modal, Upload } from 'antd';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as BlogActions from '@/redux/actionCreator';\nimport InputImage from './InputImage';\nimport jwtDecode from 'jwt-decode';\nimport { handleNotUpload } from '@/utils/prompt';\nconst UploadImage: React.FC = (props: any) => {\n  const token = jwtDecode(localStorage.getItem('token') as string) as object | any;\n  const role_type = token[0].role[0].role_type\n\n  // 预览模态框\n  const [previewOpen, setPreviewOpen] = useState(false);\n  // 预览图片\n  const [previewImage, setPreviewImage] = useState('');\n  // 预览头部\n  const [previewTitle, setPreviewTitle] = useState('');\n  // 图片信息\n  const [fileList, setFileList] = useState<any>([]);\n  // 删除后置空图片链接输入框\n  const [imgUrl, setImgUrl] = useState({});\n  // 图片赋值\n  useEffect(() => {\n    setFileList(props.imgUrlArr !== undefined ? props.imgUrlArr : []);\n  }, [props.imgUrlArr]);\n  // 上传之前的操作\n  const beforeUpload = (file: any) => {\n    // 上传图片格式\n    const isJpgOrPng =\n      file.type === 'image/jpeg' ||\n      file.type === 'image/png' ||\n      file.type === 'image/webp' ||\n      file.type === 'image/jpg' ||\n      file.type === 'image/gif';\n    if (!isJpgOrPng) {\n      message.error('只允许上传 JPG/PNG/WEBP/JPG/GIT 文件!');\n    }\n    const isLt2M = file.size / 1024 / 1024 < 2;\n    if (!isLt2M) {\n      message.error('图片大小必须小于 2MB!');\n    }\n    return isJpgOrPng && isLt2M;\n  };\n  // 上传操作\n  const uploadButton = (\n    <div>\n      <PlusOutlined />\n      <div style={{ marginTop: 8 }}>Upload</div>\n    </div>\n  );\n  // 上传图片\n  const handleUpload = (data: any) => {\n    props.BlogActions.asyncFileUploadAction(data).then((result: any) => {\n      message.success('上传成功');\n      if (result) {\n        props.handleChange(result);\n        setFileList([\n          {\n            name: result.name,\n            thumbUrl: result.url,\n          },\n        ]);\n      }\n    });\n  };\n\n  // 预览\n  const handlePreview = (file: any) => {\n    setPreviewImage(file.thumbUrl);\n    setPreviewTitle(file.name);\n    setPreviewOpen(true);\n  };\n  // 关闭预览\n  const handleCancel = () => setPreviewOpen(false);\n  // 删除图片\n  const hanleRemove = (it: any) => {\n    props.handleRemove(it)\n    setFileList([]);\n    setImgUrl({\n      url: '',\n    });\n  };\n  // 赋值上传图片\n  const onChangeVal = (data: any) => {\n    props.handleChange(data);\n    // 截取\n    let start = data.indexOf('images');\n    let end = data.indexOf('?', start);\n    let name = data.substring(start, end);\n    setFileList([\n      {\n        name: name,\n        thumbUrl: data,\n      },\n    ]);\n  };\n  return (\n    <>\n      <Upload\n        listType=\"picture-card\"\n        fileList={fileList}\n        customRequest={role_type ? handleNotUpload : handleUpload}\n        onPreview={handlePreview}\n        beforeUpload={beforeUpload}\n        // onChange={handleChange}\n        onRemove={hanleRemove}\n      >\n        {fileList.length >= 1 ? null : uploadButton}\n      </Upload>\n      {/* 预览 */}\n      <Modal open={previewOpen} title={previewTitle} footer={null} onCancel={handleCancel}>\n        <img alt=\"example\" style={{ width: '100%' }} src={previewImage} />\n      </Modal>\n      <InputImage\n        onChangeVal={onChangeVal}\n        fileList={fileList ? fileList : [{ name: '', thumbUrl: '' }]}\n        imgUrl={imgUrl}\n      />\n    </>\n  );\n};\n\nconst mapDispatchToProps = (dispatch: any) => {\n  return {\n    BlogActions: bindActionCreators(BlogActions, dispatch),\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(UploadImage);\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Form, Input, Row, Col, message, Switch, Select, notification } from 'antd';\nimport Save from '@/components/save';\nimport { connect } from 'react-redux';\nimport { Dispatch, bindActionCreators } from 'redux';\nimport * as BlogActions from '@/redux/actionCreator';\nimport UploadImage from '@/components/upload';\nimport Editor from 'for-editor';\nconst { TextArea } = Input;\nconst { Option } = Select;\nconst formItemLayout = {\n  labelCol: {\n    span: 6,\n  },\n  wrapperCol: {\n    span: 18,\n  },\n};\nconst formItemLayoutTwo = {\n  labelCol: {\n    span: 0,\n  },\n  wrapperCol: {\n    span: 24,\n  },\n};\ninterface CoverData {\n  name: string;\n  thumbUrl: string;\n}\ninterface DataType {\n  url: any;\n  data: any;\n  name: string;\n  _id: string | null | undefined;\n  publishStatus: number;\n  status: number;\n  views: number;\n  comment: number;\n  like: number;\n  categories: string;\n  content: string;\n  cover: CoverData;\n  introduction: string;\n  isComment: boolean;\n  isLike: boolean;\n  isTop: boolean;\n  tags: string[];\n  title: string;\n}\nconst ArticleUpdate = (props: any) => {\n  const [form] = Form.useForm();\n  // 标签信息\n  const [tagsList, setTagsList] = useState([]);\n  // 分类信息\n  const [categoryList, setCategoryList] = useState([]);\n  // 当前第几页\n  const [currentPage] = useState(0);\n  // 每页显示条数\n  const [pageSize] = useState(0);\n  // 上次保存时间\n  const [updateTime, setUpdateTime] = useState();\n  // 获取到的ID值\n  const [ids, setIds] = useState();\n  // 评论状态\n  const [isComment, setIsComment] = useState();\n  // 点赞状态\n  const [isLike, setIsLike] = useState();\n  // 置顶状态\n  const [isTop, setIsTop] = useState();\n  // 图片地址\n  const [imgUrl, setImgUrl] = useState<any>([]);\n  // 图片列表\n  const [imageList, setImageList] = useState<any>();\n  // 访问数量\n  const [viewCount, setViewCount] = useState()\n  // 评论数量\n  const [commentCount, setCommentCount] = useState()\n  // 点赞数量\n  const [likeCount, setLikeCount] = useState()\n  // 定义ref\n  const editorRef = useRef<any>();\n\n  // 获取文章详情\n  useEffect(() => {\n    let ids = props.match.params.id;\n    setIds(ids);\n    props.BlogActions.asyncArticleDetailAction(props.match.params.id).then((res: DataType) => {\n      let data = res.data.cover === undefined ? '' : res.data.cover;\n      let start = data.indexOf('images');\n      let name = data.substring(start);\n      res.data.cover = [\n        {\n          name: name,\n          thumbUrl: res.data.cover,\n        },\n      ];\n      setImgUrl(res.data.cover);\n      setLikeCount(res.data.like)\n      setViewCount(res.data.views)\n      setCommentCount(res.data.comment)\n      setUpdateTime(res.data.updateTime);\n      setIsTop(res.data.isTop);\n      setIsComment(res.data.isComment);\n      setIsLike(res.data.isLike);\n      form.setFieldsValue(res.data);\n    });\n  }, [form, props.BlogActions, props.match.params.id]);\n\n  // 获取分类列表\n  useEffect(() => {\n    props.BlogActions.asyncCategoriesAction(currentPage, pageSize, '').then((res: DataType) => {\n      let { data } = res.data;\n      setCategoryList(data);\n    });\n  }, [currentPage, pageSize, props.BlogActions]);\n  // 获取标签列表\n  useEffect(() => {\n    props.BlogActions.asyncTagsAction(currentPage, pageSize, '').then((res: DataType) => {\n      let { data } = res.data;\n      setTagsList(data);\n    });\n  }, [currentPage, pageSize, props.BlogActions]);\n  // 添加图片\n  const addImg = (file: any) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    // 上传图片接口\n    props.BlogActions.asyncFileUploadAction(formData).then((res: DataType) => {\n      if (res) {\n        // 如果返回值\n        editorRef.current.$img2Url(file.name, res.url);\n      }\n    });\n  };\n  // 点击刷新时重新调用接口\n  const onRefresh = () => {\n    message.success('刷新成功');\n    // 重新调用接口\n    props.BlogActions.asyncArticleDetailAction(props.match.params.id).then((res: DataType) => {\n      res.data.cover = [\n        {\n          imgUrl: res.data.cover,\n        },\n      ];\n      setUpdateTime(res.data.updateTime);\n      form.setFieldsValue(res.data);\n    });\n  };\n  // 保存草稿\n  const onDraft = async () => {\n    await form.validateFields();\n    // 获取表单数据\n    let formData = await form.getFieldsValue();\n    // 获取表单值\n    if (typeof imageList === 'object') {\n      formData.cover = imageList.url;\n    } else {\n      formData.cover = imageList;\n    }\n    if (imageList === undefined) {\n      formData.cover = imgUrl[0].thumbUrl;\n    }\n    props.BlogActions.asyncArticleUpdateAction({\n      ...formData,\n      id: ids,\n      publishStatus: 2,\n      status: 1,\n      views: viewCount,\n      comment: commentCount,\n      like: likeCount,\n      isComment: isComment,\n      isLike: isLike,\n      isTop: isTop,\n    }).then(() => {\n      notification.info({\n        message: '修改成功-保存到草稿',\n        description: `跳转到文章列表`,\n      });\n      setTimeout(() => {\n        props.history.push('/admin/article/list');\n      }, 500);\n    });\n  };\n  // 点击更新数据\n  const onPublish = async () => {\n    await form.validateFields();\n    let formData = await form.getFieldsValue();\n    // 表单数据\n    // 获取表单值\n    if (typeof imageList === 'object') {\n      formData.cover = imageList.url;\n    } else {\n      formData.cover = imageList;\n    }\n    if (imageList === undefined) {\n      formData.cover = imgUrl[0].thumbUrl;\n    }\n    props.BlogActions.asyncArticleUpdateAction({\n      id: ids,\n      ...formData,\n      publishStatus: 1,\n      status: 1,\n      views: viewCount,\n      comment: commentCount,\n      like: likeCount,\n      isComment: isComment,\n      isLike: isLike,\n      isTop: isTop,\n    }).then(() => {\n      notification.info({\n        message: '修改成功-发布到线上',\n        description: `即将跳转到文章列表`,\n      });\n      setTimeout(() => {\n        props.history.push('/admin/article/list');\n      }, 500);\n    });\n  };\n  // 返回\n  const onBack = () => {\n    props.history.goBack();\n  };\n  // 评论开启关闭\n  const onCommentChange = (record: any) => {\n    setIsComment(record);\n  };\n  // 点赞开启关闭\n  const onLikeChange = (record: any) => {\n    setIsLike(record);\n  };\n  // 置顶开启关闭\n  const onTopChange = (record: any) => {\n    setIsTop(record);\n  };\n  // 接收上传的图片信息\n  const handleChange = (data: any) => {\n    setImageList(data);\n  };\n  // 获取移除的图片信息\n  const handleRemove = (val: any) => {\n    setImageList('');\n  };\n  return (\n    <>\n\n      <div className=\"about\" style={{ height: 'calc(100vh - 174px)', overflow: 'auto' }}>\n        修改文章\n        <Form form={form}>\n          <Row>\n            <Col span={12}>\n              <Form.Item\n                name=\"title\"\n                {...formItemLayout}\n                label=\"文章标题\"\n                rules={[\n                  {\n                    required: true,\n                    message: '请输入文章标题',\n                  },\n                ]}\n              >\n                <Input placeholder=\"请输入文章标题\" />\n              </Form.Item>\n              <Form.Item\n                label=\"分类\"\n                name=\"categories\"\n                {...formItemLayout}\n                rules={[{ required: true, message: '分类不能为空' }]}\n              >\n                <Select\n                  showSearch\n                  style={{ width: '100%' }}\n                  placeholder=\"请选择分类信息\"\n                  optionFilterProp=\"children\"\n                >\n                  {categoryList.map((item: any) => (\n                    <Option value={item.name} key={item._id}>\n                      {item.name}\n                    </Option>\n                  ))}\n                </Select>\n              </Form.Item>\n              <Form.Item\n                label=\"标签\"\n                name=\"tags\"\n                {...formItemLayout}\n                rules={[{ required: true, message: '标签不能为空' }]}\n              >\n                <Select\n                  mode=\"multiple\"\n                  style={{ width: '100%' }}\n                  placeholder=\"请选择对应的标签\"\n                  optionLabelProp=\"label\"\n                >\n                  {tagsList.map((item: any) => (\n                    <Option value={item.name} key={item._id} label={item.name}>\n                      {item.name}\n                    </Option>\n                  ))}\n                </Select>\n              </Form.Item>\n              <Form.Item\n                name=\"introduction\"\n                {...formItemLayout}\n                label=\"文章简介\"\n                rules={[\n                  {\n                    required: true,\n                    message: '请输入文章简介',\n                  },\n                ]}\n              >\n                <TextArea showCount rows={4} maxLength={500} />\n              </Form.Item>\n            </Col>\n            <Col span={10}>\n              <Form.Item name=\"cover\" {...formItemLayout} label=\"文章封面\">\n                <UploadImage\n                  // @ts-ignore\n                  imgUrlArr={imgUrl}\n                  handleChange={handleChange}\n                  handleRemove={handleRemove}\n                />\n              </Form.Item>\n              <Form.Item name=\"isComment\" {...formItemLayout} label=\"评论\">\n                <Switch checked={isComment} onChange={onCommentChange} />\n              </Form.Item>\n              <Form.Item name=\"isLike\" {...formItemLayout} label=\"点赞\">\n                <Switch checked={isLike} onChange={onLikeChange} />\n              </Form.Item>\n              <Form.Item name=\"isTop\" {...formItemLayout} label=\"置顶\">\n                <Switch checked={isTop} onChange={onTopChange} />\n              </Form.Item>\n            </Col>\n          </Row>\n          <Row>\n            <Col span={24}>\n              <Form.Item name=\"content\" {...formItemLayoutTwo}>\n                <Editor\n                  preview={false}\n                  subfield={false}\n                  placeholder=\"请撰写文章\"\n                  ref={editorRef}\n                  addImg={file => addImg(file)}\n                // onChange={value => this.handleChange(value)}\n                />\n              </Form.Item>\n            </Col>\n          </Row>\n        </Form>\n      </div>\n      <Save\n        time={updateTime}\n        onRefresh={onRefresh}\n        onDraft={onDraft}\n        onPublish={onPublish}\n        onBack={onBack}\n      />\n    </>\n  );\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch) => {\n  return {\n    BlogActions: bindActionCreators(BlogActions, dispatch),\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(ArticleUpdate);\n","import { message } from 'antd';\n\n// 禁止操作项\nexport const handleNotDelete = () => {\n  return message.warning('访客暂不支持删除操作😅');\n};\nexport const handleNotUpdate = () => {\n  return message.warning('访客暂不支持更新操作😅');\n};\nexport const handleNotAdd = () => {\n  return message.warning('访客暂不支持添加操作😅');\n};\nexport const handleNotAudit = () => {\n  return message.warning('访客暂不支持审批操作😅');\n};\nexport const handleNotAllAudit = () => {\n  return message.warning('访客暂不支持一键审批操作😅');\n};\nexport const onNotChangePublishStatus = () => {\n  return message.warning('访客暂不支持下线文章操作😅');\n};\nexport const onNotChangePublishLineStatus = () => {\n  return message.warning('访客暂不支持上线文章操作😅');\n};\nexport const onNotChangeStatus = () => {\n  return message.warning('访客暂不支持置顶操作😅');\n};\nexport const handleNotChangeStatus = () => {\n  return message.warning('访客暂不支持状态变更操作😅');\n};\nexport const handleNotSave = () => {\n  return message.warning('访客暂不支持发布操作😅');\n};\nexport const handleNotSaveArticle = () => {\n  return message.warning('访客暂不支持发布文章操作😅');\n};\nexport const handleNotSaveDraft = () => {\n  return message.warning('访客暂不支持保存草稿操作😅');\n};\nexport const handleNotUpload = () => {\n  return message.warning('访客暂不支持上传图片操作😅');\n};\nexport const handleNotLike = () => {\n  return message.warning('访客暂不支持输入图片链接操作😅');\n};\n"],"names":["connect","state","isCollapsed","SideMenuStateReducer","withRouter","props","role_type","jwtDecode","localStorage","getItem","role","time","showBack","onRefresh","onSave","onBack","onDraft","onPublish","message","dayjs","format","className","bordered","style","width","ClockCircleOutlined","onClick","history","goBack","type","ghost","icon","RollbackOutlined","ArrowLeftOutlined","RedoOutlined","handleNotSave","SaveOutlined","handleNotSaveDraft","handleNotSaveArticle","form","Form","visible","setVisible","useState","useEffect","fileList","length","setFieldsValue","url","thumbUrl","imgUrl","resetFields","forceRender","title","textAlign","open","okText","cancelText","onOk","handleNotLike","val","getFieldsValue","onChangeVal","onCancel","label","name","rules","required","placeholder","dispatch","BlogActions","bindActionCreators","previewOpen","setPreviewOpen","previewImage","setPreviewImage","previewTitle","setPreviewTitle","setFileList","setImgUrl","undefined","imgUrlArr","uploadButton","PlusOutlined","marginTop","listType","customRequest","handleNotUpload","data","asyncFileUploadAction","then","result","handleChange","onPreview","file","beforeUpload","isJpgOrPng","isLt2M","size","onRemove","it","handleRemove","footer","alt","src","start","indexOf","end","substring","TextArea","Input","Option","Select","formItemLayout","labelCol","span","wrapperCol","formItemLayoutTwo","tagsList","setTagsList","categoryList","setCategoryList","currentPage","pageSize","updateTime","setUpdateTime","ids","setIds","isComment","setIsComment","isLike","setIsLike","isTop","setIsTop","imageList","setImageList","viewCount","setViewCount","commentCount","setCommentCount","likeCount","setLikeCount","editorRef","useRef","match","params","id","asyncArticleDetailAction","res","cover","like","views","comment","asyncCategoriesAction","asyncTagsAction","height","overflow","showSearch","optionFilterProp","map","item","value","_id","mode","optionLabelProp","showCount","rows","maxLength","checked","onChange","record","preview","subfield","ref","addImg","formData","FormData","append","current","$img2Url","async","validateFields","asyncArticleUpdateAction","publishStatus","status","notification","description","setTimeout","push","handleNotDelete","handleNotUpdate","handleNotAdd","handleNotAudit","handleNotAllAudit","onNotChangePublishStatus","onNotChangePublishLineStatus","onNotChangeStatus","handleNotChangeStatus"],"sourceRoot":""}