{"version":3,"file":"static/js/421.39b7beeb.chunk.js","mappings":"8KAGA,MAoCA,EApCsBA,IAEpB,MAAOC,EAAOC,IAAYC,EAAAA,EAAAA,UAAS,IAE5BC,EAAaC,IAAkBF,EAAAA,EAAAA,UAAS,IAExCG,EAAUC,IAAeJ,EAAAA,EAAAA,UAAS,IACzCK,EAAAA,EAAAA,YAAU,KACRN,EAASF,EAAMC,OACfI,EAAeL,EAAMI,aACrBG,EAAYP,EAAMM,SAAS,GAC1B,CAACN,IAMJ,OACE,0BAEE,SAAE,KAAc,CAACS,OAAQC,EAAAA,EAAK,UAC5B,SAAC,IAAU,CACTC,MAAO,CAAEC,UAAW,SAAUC,WAAY,OAAQC,UAAW,qBAC7DC,QAASX,EACTE,SAAUA,EACVL,MAAOA,EACPe,gBAAiB,CAAC,EAAG,GAAI,GAAI,KAC7BC,SAda,CAACC,EAAcZ,KAElCN,EAAMiB,SAASC,EAAMZ,EAAS,EAaxBa,iBAAe,EACfC,iBAAe,EACfC,UAAWpB,GAAU,gBAAKA,4BAG1B,C,iKClCV,QADoB,CAAE,KAAQ,CAAE,IAAO,MAAO,MAAS,CAAE,QAAW,gBAAiB,UAAa,SAAW,SAAY,CAAC,CAAE,IAAO,OAAQ,MAAS,CAAE,EAAK,2pBAA+pB,KAAQ,QAAS,MAAS,Y,cCKh1BqB,EAAgB,SAAuBtB,EAAOuB,GAChD,OAAoBC,EAAAA,cAAoBC,EAAAA,GAAUC,EAAAA,EAAAA,IAAcA,EAAAA,EAAAA,GAAc,CAAC,EAAG1B,GAAQ,CAAC,EAAG,CAC5FuB,IAAKA,EACLI,KAAMC,IAEV,EACAN,EAAcO,YAAc,gBAC5B,QAA4BL,EAAAA,WAAiBF,G,8GCD7C,MAAQQ,QAAQ,GAAIC,EAAAA,EA+UpB,GAAeC,EAAAA,EAAAA,IAAQ,MALKC,IACnB,CACLC,aAAaC,EAAAA,EAAAA,IAAmBD,EAAaD,MAGjD,EA5TiBjC,IACf,MACMoC,GADQC,EAAAA,EAAAA,GAAUC,aAAaC,QAAQ,UACrB,GAAGC,KAAK,GAAGJ,UAC7BK,EAAiC,CACrC,CACEC,MAAO,eACPC,UAAW,WACXC,MAAO,KAET,CACEF,MAAO,eACPC,UAAW,QACXC,MAAO,KAET,CACEF,MAAO,uCACPC,UAAW,uBACXE,OAAQ,CAACC,EAAGC,KACH,cAAGC,UAAU,eAAerC,MAAO,CAAEiC,MAAO,QAAS,SAAEG,EAAOE,wBAGzE,CACEP,MAAO,uCACPE,MAAO,IACPD,UAAW,sBACXE,OAAQ,CAACC,EAAGC,KACH,cAAGC,UAAU,eAAerC,MAAO,CAAEiC,MAAO,QAAS,SAAEG,EAAOG,uBAGzE,CACER,MAAO,2BACPC,UAAW,cACXC,MAAO,IACPC,OAAQM,IACN,MAAMpC,EAAUqC,EAAAA,EAAAA,QAA0BC,GAAQA,EAAKC,SAAWH,IAMlE,OACE,SAAC,IAAK,CAACI,UAAU,WAAU,UACzB,SAAC,IAAK,CAACJ,OAPQ,CACjB,EAAG,UACH,EAAG,QACH,EAAG,WAIoBpC,EAAQ,GAAGuC,OAAQE,KAAMzC,EAAQ,GAAG0C,SACnD,GAKd,CACEf,MAAO,2BACPC,UAAW,cACXE,OAAQa,GACCC,IAAa,IAAPD,GAAaE,OAAO,wBAWrC,CACElB,MAAO,eACPmB,IAAK,SACLb,UAAW,aACXH,OAAQQ,IAEJ,4BACE,SAAC,IAAM,CACLS,KAAK,UACLC,QAAM,EACNC,MAAM,SACNrC,MAAM,SAACsC,EAAA,EAAc,IACrBC,QAAS,KACPC,EAAcd,EAAK,EAErB1C,MAAO,CAAEyD,YAAa,UAExB,SAAC,IAAM,CACLN,KAAK,UACLE,MAAM,SACNrC,MAAM,SAAC,EAAa,IACpBuC,QAAS,KACPG,EAAahB,EAAK,EAEpB1C,MAAO,CAAEyD,YAAa,eAS3BE,EAAMC,IAAWpE,EAAAA,EAAAA,UAAqB,KAEtCF,EAAOC,IAAYC,EAAAA,EAAAA,UAAS,IAE5BC,EAAaC,IAAkBF,EAAAA,EAAAA,UAAS,IAExCG,EAAUC,IAAeJ,EAAAA,EAAAA,UAAS,KAElCqE,EAAaC,IAAkBtE,EAAAA,EAAAA,WAAS,IAExCuE,GAAQC,EAAAA,EAAAA,WAERC,EAAIC,IAAS1E,EAAAA,EAAAA,aAEb2E,EAAcC,IAAmB5E,EAAAA,EAAAA,aAExCK,EAAAA,EAAAA,YAAU,KACRR,EAAMkC,YAAY8C,uBAAuB5E,EAAaE,EAAU,GAAG2E,MAAMC,IAEvE,IAAI,KAAEC,EAAI,WAAEC,EAAU,KAAElE,EAAI,SAAEZ,GAAa4E,EAAIC,KAE/CA,EAAKE,SAAShC,IACiB,IAAzBA,EAAKiC,SAASC,SAChBlC,EAAKiC,SAAW,GAClB,IAEFf,EAAQY,GACRjF,EAASkF,GACT/E,EAAea,GACfX,EAAYD,EAAS,GACrB,GACD,CAACF,EAAaE,EAAUN,EAAMkC,cAGjC,MAAMiC,EAAiBd,IACrBvB,EAAQ,CACNY,MAAO,8CACPf,MAAM,SAAC6D,EAAA,EAAyB,IAChCC,OACE,GAAIrD,EACF,OAAOsD,EAAAA,EAAAA,MAGTnB,EAAQD,EAAKqB,QAAQC,GAAOA,EAAGC,MAAQxC,EAAKwC,OAC5CC,EAAAA,GAAAA,QAAgB,wCAChB9F,EAAMkC,YAAY6D,yBAAyB1C,EAAKwC,KAAKZ,MAAK,KACxDjF,EAAMkC,YAAY8C,uBAAuB5E,EAAaE,EAAU,GAAG2E,MAAMC,IAEvE,IAAI,KAAEC,EAAI,WAAEC,EAAU,KAAElE,EAAI,SAAEZ,GAAa4E,EAAIC,KAC/CZ,EAAQY,GACRjF,EAASkF,GACT/E,EAAea,GACfX,EAAYD,EAAS,GACrB,GAEN,GACA,EAGE+D,EAAgBhB,IACpB2C,YAAW,KACTtB,EAAKuB,eAAe,CAClBC,aAAc7C,EAAK6C,aACnB,GACD,KACHnB,EAAgB1B,GAChBwB,EAAMxB,EAAKwC,KACXpB,GAAe,EAAK,EAEhBtB,EAAc,CAClB,EAAG,eACH,EAAG,gBA6FL,OACE,4BACE,gBAAKH,UAAU,QAAO,UACpB,SAAC,IAAM,CAACc,KAAK,UAAUI,QAAS,IAAM9B,GAAY+D,EAAAA,EAAAA,MAAsB9B,EAAa,CAAEwB,IAAK,IAAK,yCAQnG,SAAC,IAAK,CACJO,KAAM5B,EACN9B,OAAO,gBAAK/B,MAAO,CAAEC,UAAW,QAAS,sCACzCyF,OAAO,eACPC,WAAW,eACXC,SAlCe,KACnB7B,EAAK8B,cACL/B,GAAe,EAAM,EAiCjBgB,KAAM,KA3GUgB,WACpB,GAAIrE,EACF,OAAOsE,EAAAA,EAAAA,YAEHhC,EAAKiC,iBACX,MAAMC,EAAMlC,EAAKmC,iBAGN,IAAPjC,EACF5E,EAAMkC,YAAY4E,+BAA+B,CAC/CZ,YAAaU,EAAIV,YACjBtB,GAAIA,IACHK,MAAK,KACNjF,EAAMkC,YAAY8C,uBAAuB5E,EAAaE,EAAU,GAAG2E,MAAMC,IAEvE,IAAI,KAAEC,EAAI,WAAEC,EAAU,KAAElE,EAAI,SAAEZ,GAAa4E,EAAIC,KAC/CZ,EAAQY,GACRjF,EAASkF,GACT/E,EAAea,GACfX,EAAYD,EAAS,IAEvBwF,EAAAA,GAAAA,QAAiB,2BAAM3C,EAAOyD,EAAIV,4BAClCxB,EAAK8B,cACL/B,GAAe,EAAM,IAGnBK,EAAaQ,UACH,OAAZR,QAAY,IAAZA,GAAAA,EAAcQ,SAASyB,KAAKC,GAC1BhH,EAAMkC,YAAY4E,+BAA+B,CAC/CZ,YAAaU,EAAIV,YACjBtB,GAAIoC,EAAMnB,QAId7F,EAAMkC,YAAY4E,+BAA+B,CAC/CZ,YAAaU,EAAIV,YACjBtB,GAAIA,IACHK,MAAK,KACNjF,EAAMkC,YAAY8C,uBAAuB5E,EAAaE,EAAU,GAAG2E,MAAMC,IAEvE,IAAI,KAAEC,EAAI,WAAEC,EAAU,KAAElE,EAAI,SAAEZ,GAAa4E,EAAIC,KAC/CZ,EAAQY,GACRjF,EAASkF,GACT/E,EAAea,GACfX,EAAYD,EAAS,IAEvBwF,EAAAA,GAAAA,QAAiB,eAAI3C,EAAOyD,EAAIV,4BAChCxB,EAAK8B,cACL/B,GAAe,EAAM,KAIvBzE,EAAMkC,YAAY4E,+BAA+B,CAC/CZ,YAAaU,EAAIV,YACjBtB,GAAIA,IACHK,MAAK,KACNjF,EAAMkC,YAAY8C,uBAAuB5E,EAAaE,EAAU,GAAG2E,MAAMC,IAEvE,IAAI,KAAEC,EAAI,WAAEC,EAAU,KAAElE,EAAI,SAAEZ,GAAa4E,EAAIC,KAC/CZ,EAAQY,GACRjF,EAASkF,GACT/E,EAAea,GACfX,EAAYD,EAAS,IAEvBwF,EAAAA,GAAAA,QAAiB,eAAI3C,EAAOyD,EAAIV,4BAChCxB,EAAK8B,cACL/B,GAAe,EAAM,GAG3B,EAuCMwC,EAAe,EACf,UAEF,SAAC,IAAI,CAACvC,KAAMA,EAAMwC,OAAO,WAAWC,KAAK,QAAQnE,UAAU,cAAa,UACtE,SAAC,SAAS,CAACmE,KAAK,cAAcC,MAAO,CAAC,CAAEC,UAAU,EAAMvB,QAAS,+CAAa,UAC5E,UAAC,WAAW,YACV,SAAC,KAAK,CAACxC,MAAO,EAAE,2BAChB,SAAC,KAAK,CAACA,MAAO,EAAE,oCAKxB,SAAC,IAAK,CACJgE,OAASjE,GACAA,EAAKwC,IAEdpD,QAASA,EACT8E,WAAYjD,EACZkD,OAAQ,CAAEC,EAAG,sBAAuBC,GAAG,GACvCC,kBAAkB,EAClBC,sBAAsB,EACtBC,YAAY,KAEd,SAAC,IAAY,CACXvH,SAAUA,EACVF,YAAaA,EACbH,MAAOA,EACPgB,SAzDe,SAACC,EAAcZ,GAAmC,IAAjBwH,EAAM,uDAAG,GAE7D9H,EAAMkC,YAAY6F,oBAAoB7G,EAAMZ,EAAUwH,GAAQ7C,MAAMC,IAElE,IAAI,KAAEC,GAASD,EAAIC,KACnBZ,EAAQY,GAER9E,EAAea,GAEfX,EAAYD,EAAS,GAEzB,MAgDQ,G,2CClVH,MAYM8C,EAAqB,CAChC,CACEE,MAAO,EACPG,MAAO,gBAET,CACEH,MAAO,EACPG,MAAO,gBAET,CACEH,MAAO,EACPG,MAAO,gBAET,CACEH,MAAO,EACPG,MAAO,uBAGEuE,EAAgB,CAC3B,CACE1E,MAAO,EACPG,MAAO,gBAET,CACEH,MAAO,EACPG,MAAO,sBAET,CACEH,MAAO,EACPG,MAAO,sB,sKCtCJ,MAAMiC,EAAkB,IACtBI,EAAAA,GAAAA,QAAgB,4EAEZmC,EAAkB,IACtBnC,EAAAA,GAAAA,QAAgB,4EAEZoC,EAAe,IACnBpC,EAAAA,GAAAA,QAAgB,4EAEZY,EAAiB,IACrBZ,EAAAA,GAAAA,QAAgB,4EAEZK,EAAoB,IACxBL,EAAAA,GAAAA,QAAgB,wFAEZqC,EAA2B,IAC/BrC,EAAAA,GAAAA,QAAgB,wFAEZsC,EAA+B,IACnCtC,EAAAA,GAAAA,QAAgB,wFAEZuC,EAAoB,IACxBvC,EAAAA,GAAAA,QAAgB,4EAEZwC,EAAwB,IAC5BxC,EAAAA,GAAAA,QAAgB,wFAEZyC,EAAgB,IACpBzC,EAAAA,GAAAA,QAAgB,4EAEZ0C,EAAuB,IAC3B1C,EAAAA,GAAAA,QAAgB,wFAEZ2C,EAAqB,IACzB3C,EAAAA,GAAAA,QAAgB,wFAEZ4C,EAAkB,IACtB5C,EAAAA,GAAAA,QAAgB,wFAEZ6C,EAAgB,IACpB7C,EAAAA,GAAAA,QAAgB,mG","sources":["components/pagination/index.tsx","../node_modules/@ant-design/icons-svg/es/asn/AuditOutlined.js","../node_modules/@ant-design/icons/es/icons/AuditOutlined.js","pages/message/index.tsx","utils/constants.ts","utils/prompt.ts"],"sourcesContent":["import { ConfigProvider, Pagination } from 'antd'\nimport React, { useEffect, useState } from 'react'\nimport zhCN from 'antd/es/locale/zh_CN';\nconst MyPagination = (props: any) => {\n  // 分页总数\n  const [total, setTotal] = useState(0)\n  // 当前第几页\n  const [currentPage, setCurrentPage] = useState(0)\n  // 每页显示条数\n  const [pageSize, setPageSize] = useState(0)\n  useEffect(() => {\n    setTotal(props.total)\n    setCurrentPage(props.currentPage)\n    setPageSize(props.pageSize)\n  }, [props])\n\n  const onChangePage = (page: number, pageSize: number) => {\n    // 将切换的页码参数传递过去\n    props.onChange(page, pageSize)\n  }\n  return (\n    <div>\n      {/* 中文语言包 */}\n      < ConfigProvider locale={zhCN} >\n        <Pagination\n          style={{ textAlign: 'center', paddingTop: '10px', borderTop: '2px solid #fafafa' }}\n          current={currentPage} // 当前页\n          pageSize={pageSize} // 每页条数\n          total={total} // 数据总数\n          pageSizeOptions={[5, 15, 50, 100]} // 每页显示多少条\n          onChange={onChangePage} // 监听pageSize回调\n          showSizeChanger // 展示 pageSize 切换器\n          showQuickJumper // 快速跳转至某页\n          showTotal={total => `共有 ${total} 条数据`} // 展示页码\n        />\n      </ConfigProvider >\n    </div>\n  )\n}\nexport default MyPagination\n","// This icon file is generated automatically.\nvar AuditOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M296 250c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm184 144H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-48 458H208V148h560v320c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm440-88H728v-36.6c46.3-13.8 80-56.6 80-107.4 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 50.7 33.7 93.6 80 107.4V764H520c-8.8 0-16 7.2-16 16v152c0 8.8 7.2 16 16 16h352c8.8 0 16-7.2 16-16V780c0-8.8-7.2-16-16-16zM646 620c0-27.6 22.4-50 50-50s50 22.4 50 50-22.4 50-50 50-50-22.4-50-50zm180 266H566v-60h260v60z\" } }] }, \"name\": \"audit\", \"theme\": \"outlined\" };\nexport default AuditOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport AuditOutlinedSvg from \"@ant-design/icons-svg/es/asn/AuditOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar AuditOutlined = function AuditOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: AuditOutlinedSvg\n  }));\n};\nAuditOutlined.displayName = 'AuditOutlined';\nexport default /*#__PURE__*/React.forwardRef(AuditOutlined);","import React, { useEffect, useState } from 'react';\nimport { Badge, Button, Form, message, Modal, Radio, Space, Table } from 'antd';\nimport type { ColumnsType } from 'antd/es/table';\nimport { DeleteOutlined, ExclamationCircleOutlined, AuditOutlined } from '@ant-design/icons';\nimport { connect } from 'react-redux';\nimport { Dispatch, bindActionCreators } from 'redux';\nimport * as BlogActions from '@/redux/actionCreator';\nimport MyPagination from '@/components/pagination';\nimport { auditStatusOptions } from '@/utils/constants';\nimport dayjs from 'dayjs';\nimport jwtDecode from 'jwt-decode';\nimport { handleNotAudit, handleNotDelete, handleNotAllAudit } from '@/utils/prompt';\nconst { confirm } = Modal;\ninterface DataType {\n  targetReplayContent: string;\n  currentReplayContent: string;\n  key?: React.Key;\n  _id: string;\n  nickName?: string;\n  avatar?: string;\n  messageTime: string;\n  auditTime: string;\n  children?: DataType[] | string | undefined;\n}\ninterface MessageData {\n  _id: string;\n  totalCount: number;\n  page: number;\n  pageSize: number;\n  data: DataType[];\n}\nconst Message = (props: any) => {\n  const token = jwtDecode(localStorage.getItem('token') as string) as object | any;\n  const role_type = token[0].role[0].role_type\n  const columns: ColumnsType<DataType> = [\n    {\n      title: '昵称',\n      dataIndex: 'nickName',\n      width: 150,\n    },\n    {\n      title: '邮箱',\n      dataIndex: 'email',\n      width: 100,\n    },\n    {\n      title: '当前回复内容',\n      dataIndex: 'currentReplayContent',\n      render: (_, record) => {\n        return <p className='introduction' style={{ width: '9rem' }}>{record.currentReplayContent}</p>;\n      },\n    },\n    {\n      title: '目标回复内容',\n      width: 120,\n      dataIndex: 'targetReplayContent',\n      render: (_, record) => {\n        return <p className='introduction' style={{ width: '9rem' }}>{record.targetReplayContent}</p>;\n      },\n    },\n    {\n      title: '审核状态',\n      dataIndex: 'auditStatus',\n      width: 100,\n      render: status => {\n        const current = auditStatusOptions.filter(item => item.value === +status);\n        const enums: any = {\n          1: 'success',\n          2: 'error',\n          3: 'warning',\n        };\n        return (\n          <Space direction=\"vertical\">\n            <Badge status={enums[current[0].value]} text={current[0].label} />\n          </Space>\n        );\n      },\n    },\n\n    {\n      title: '留言时间',\n      dataIndex: 'messageTime',\n      render: time => {\n        return dayjs(time * 1000).format('YYYY-MM-DD HH:mm:ss');\n      },\n    },\n    // {\n    //   title: '审核时间',\n    //   dataIndex: 'auditTime',\n    //   width: 100,\n    //   render: time => {\n    //     return time && dayjs(time * 1000).format('YYYY-MM-DD HH:mm:ss');\n    //   },\n    // },\n    {\n      title: '操作',\n      key: 'action',\n      className: 'handle_btn',\n      render: item => {\n        return (\n          <div>\n            <Button\n              type=\"primary\"\n              danger\n              shape=\"circle\"\n              icon={<DeleteOutlined />}\n              onClick={() => {\n                messageDelete(item);\n              }}\n              style={{ marginRight: '5px' }}\n            />\n            <Button\n              type=\"primary\"\n              shape=\"circle\"\n              icon={<AuditOutlined />}\n              onClick={() => {\n                messageAudit(item);\n              }}\n              style={{ marginRight: '5px' }}\n            ></Button>\n          </div>\n        );\n      },\n    },\n  ];\n\n  // 留言列表\n  const [list, setList] = useState<DataType[]>([]);\n  // 分页总数\n  const [total, setTotal] = useState(0);\n  // 当前第几页\n  const [currentPage, setCurrentPage] = useState(1);\n  // 每页显示条数\n  const [pageSize, setPageSize] = useState(15);\n  // 窗口\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  // 表单数据\n  const [form] = Form.useForm();\n  // 将id值存放\n  const [id, setId] = useState();\n  // 点击审核时获取到的数据列表\n  const [auditContent, setAuditContent] = useState<any>();\n  // 获取留言列表数据\n  useEffect(() => {\n    props.BlogActions.asyncMessageListAction(currentPage, pageSize, 0).then((res: MessageData) => {\n      // 获取留言\n      let { data, totalCount, page, pageSize } = res.data as unknown as MessageData;\n      // 无子节点情况下，按钮\n      data.forEach((item: any) => {\n        if (item.children.length === 0) {\n          item.children = '';\n        }\n      });\n      setList(data);\n      setTotal(totalCount);\n      setCurrentPage(page);\n      setPageSize(pageSize);\n    });\n  }, [currentPage, pageSize, props.BlogActions]);\n\n  // 删除留言\n  const messageDelete = (item: { _id: string; }) => {\n    confirm({\n      title: '你确定要删除吗?',\n      icon: <ExclamationCircleOutlined />,\n      onOk() {\n        if (role_type) {\n          return handleNotDelete();\n        }\n        // 先将要删除的数据过滤掉再调用接口\n        setList(list.filter((it) => it._id !== item._id));\n        message.success('留言删除成功');\n        props.BlogActions.asyncMessageDeleteAction(item._id).then(() => {\n          props.BlogActions.asyncMessageListAction(currentPage, pageSize, 0).then((res: MessageData) => {\n            // 获取留言\n            let { data, totalCount, page, pageSize } = res.data as unknown as MessageData;\n            setList(data);\n            setTotal(totalCount);\n            setCurrentPage(page);\n            setPageSize(pageSize);\n          });\n        });\n      },\n    });\n  };\n  // 审核\n  const messageAudit = (item: { _id: any; auditStatus?: any; }) => {\n    setTimeout(() => {\n      form.setFieldsValue({\n        auditStatus: +item.auditStatus,\n      });\n    }, 100);\n    setAuditContent(item);\n    setId(item._id);\n    setIsModalOpen(true);\n  };\n  const status: any = {\n    1: '通过',\n    2: '驳回',\n  };\n  // 点击确定\n  const handleConfirm = async () => {\n    if (role_type) {\n      return handleNotAudit();\n    }\n    await form.validateFields();\n    const val = form.getFieldsValue();\n\n    // 一键审核\n    if (id === 0) {\n      props.BlogActions.asyncMessageStatusUpdateAction({\n        auditStatus: val.auditStatus,\n        id: id,\n      }).then(() => {\n        props.BlogActions.asyncMessageListAction(currentPage, pageSize, 0).then((res: MessageData) => {\n          // 获取留言\n          let { data, totalCount, page, pageSize } = res.data as unknown as MessageData;\n          setList(data);\n          setTotal(totalCount);\n          setCurrentPage(page);\n          setPageSize(pageSize);\n        });\n        message.success(`一键审核${status[val.auditStatus]}成功`);\n        form.resetFields();\n        setIsModalOpen(false);\n      });\n    } else {\n      if (auditContent.children) {\n        auditContent?.children.map((audit: MessageData) =>\n          props.BlogActions.asyncMessageStatusUpdateAction({\n            auditStatus: val.auditStatus,\n            id: audit._id,\n          })\n        );\n        //父节点数据\n        props.BlogActions.asyncMessageStatusUpdateAction({\n          auditStatus: val.auditStatus,\n          id: id,\n        }).then(() => {\n          props.BlogActions.asyncMessageListAction(currentPage, pageSize, 0).then((res: MessageData) => {\n            // 获取留言\n            let { data, totalCount, page, pageSize } = res.data as unknown as MessageData;\n            setList(data);\n            setTotal(totalCount);\n            setCurrentPage(page);\n            setPageSize(pageSize);\n          });\n          message.success(`审核${status[val.auditStatus]}成功`);\n          form.resetFields();\n          setIsModalOpen(false);\n        });\n      } else {\n        //父节点数据\n        props.BlogActions.asyncMessageStatusUpdateAction({\n          auditStatus: val.auditStatus,\n          id: id,\n        }).then(() => {\n          props.BlogActions.asyncMessageListAction(currentPage, pageSize, 0).then((res: MessageData) => {\n            // 获取留言\n            let { data, totalCount, page, pageSize } = res.data as unknown as MessageData;\n            setList(data);\n            setTotal(totalCount);\n            setCurrentPage(page);\n            setPageSize(pageSize);\n          });\n          message.success(`审核${status[val.auditStatus]}成功`);\n          form.resetFields();\n          setIsModalOpen(false);\n        });\n      }\n    }\n  };\n  // 关闭窗口\n  const handleCancel = () => {\n    form.resetFields();\n    setIsModalOpen(false);\n  };\n\n  // 跳转页数据显示\n  const onChangePage = (page: number, pageSize: number, params = '') => {\n    // 重新调用接口将参数传递过去\n    props.BlogActions.asyncCommentsAction(page, pageSize, params).then((res: MessageData) => {\n      // 获取列表数据\n      let { data } = res.data as unknown as MessageData;\n      setList(data);\n      // 切换行\n      setCurrentPage(page);\n      // 根据页面数据显示页码\n      setPageSize(pageSize);\n    });\n  };\n  return (\n    <div>\n      <div className=\"title\">\n        <Button type=\"primary\" onClick={() => role_type ? handleNotAllAudit() : messageAudit({ _id: 0 })}>\n          一键审核\n        </Button>\n        {/* <div className=\"cate_search\">\n          <Select defaultValue={0} style={{ width: 120 }} options={auditStatusOptions}></Select>\n          <Search className=\"search\" allowClear placeholder=\"请输入留言名称\" enterButton />\n        </div> */}\n      </div>\n      <Modal\n        open={isModalOpen}\n        title={<div style={{ textAlign: 'left' }}>添加审核</div>}\n        okText=\"新增\"\n        cancelText=\"取消\"\n        onCancel={handleCancel}\n        onOk={() => {\n          handleConfirm();\n        }}\n      >\n        <Form form={form} layout=\"vertical\" name=\"basic\" className=\"userAddFrom\">\n          <Form.Item name=\"auditStatus\" rules={[{ required: true, message: '请选择审核状态' }]}>\n            <Radio.Group>\n              <Radio value={1}>通过</Radio>\n              <Radio value={2}>驳回</Radio>\n            </Radio.Group>\n          </Form.Item>\n        </Form>\n      </Modal>\n      <Table\n        rowKey={(item) => {\n          return item._id;\n        }}\n        columns={columns}\n        dataSource={list}\n        scroll={{ y: 'calc(100vh - 240px)', x: true }}\n        expandRowByClick={true}\n        defaultExpandAllRows={true}\n        pagination={false}\n      />\n      <MyPagination\n        pageSize={pageSize}\n        currentPage={currentPage}\n        total={total}\n        onChange={onChangePage}\n      ></MyPagination>\n    </div>\n  );\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch) => {\n  return {\n    BlogActions: bindActionCreators(BlogActions, dispatch),\n  };\n};\nexport default connect(null, mapDispatchToProps)(Message);\n","export const colors = [\n  'red',\n  'orangered',\n  'orange',\n  'gold',\n  'lime',\n  'green',\n  'cyan',\n  'blue',\n  'pinkpurple',\n  'magenta',\n];\nexport const auditStatusOptions = [\n  {\n    value: 0,\n    label: '全部',\n  },\n  {\n    value: 1,\n    label: '通过',\n  },\n  {\n    value: 2,\n    label: '驳回',\n  },\n  {\n    value: 3,\n    label: '未审核',\n  },\n];\nexport const statusPublish = [\n  {\n    value: 0,\n    label: '全部',\n  },\n  {\n    value: 1,\n    label: '已发布',\n  },\n  {\n    value: 2,\n    label: '未发布',\n  },\n];\n// 图片格式\nexport const imagesType = ['image/jpeg', 'image/webp', 'image/jpg', 'image/png', 'image/gif'];\n","import { message } from 'antd';\n\n// 禁止操作项\nexport const handleNotDelete = () => {\n  return message.warning('访客暂不支持删除操作😅');\n};\nexport const handleNotUpdate = () => {\n  return message.warning('访客暂不支持更新操作😅');\n};\nexport const handleNotAdd = () => {\n  return message.warning('访客暂不支持添加操作😅');\n};\nexport const handleNotAudit = () => {\n  return message.warning('访客暂不支持审批操作😅');\n};\nexport const handleNotAllAudit = () => {\n  return message.warning('访客暂不支持一键审批操作😅');\n};\nexport const onNotChangePublishStatus = () => {\n  return message.warning('访客暂不支持下线文章操作😅');\n};\nexport const onNotChangePublishLineStatus = () => {\n  return message.warning('访客暂不支持上线文章操作😅');\n};\nexport const onNotChangeStatus = () => {\n  return message.warning('访客暂不支持置顶操作😅');\n};\nexport const handleNotChangeStatus = () => {\n  return message.warning('访客暂不支持状态变更操作😅');\n};\nexport const handleNotSave = () => {\n  return message.warning('访客暂不支持发布操作😅');\n};\nexport const handleNotSaveArticle = () => {\n  return message.warning('访客暂不支持发布文章操作😅');\n};\nexport const handleNotSaveDraft = () => {\n  return message.warning('访客暂不支持保存草稿操作😅');\n};\nexport const handleNotUpload = () => {\n  return message.warning('访客暂不支持上传图片操作😅');\n};\nexport const handleNotLike = () => {\n  return message.warning('访客暂不支持输入图片链接操作😅');\n};\n"],"names":["props","total","setTotal","useState","currentPage","setCurrentPage","pageSize","setPageSize","useEffect","locale","zhCN","style","textAlign","paddingTop","borderTop","current","pageSizeOptions","onChange","page","showSizeChanger","showQuickJumper","showTotal","AuditOutlined","ref","React","AntdIcon","_objectSpread","icon","AuditOutlinedSvg","displayName","confirm","Modal","connect","dispatch","BlogActions","bindActionCreators","role_type","jwtDecode","localStorage","getItem","role","columns","title","dataIndex","width","render","_","record","className","currentReplayContent","targetReplayContent","status","auditStatusOptions","item","value","direction","text","label","time","dayjs","format","key","type","danger","shape","DeleteOutlined","onClick","messageDelete","marginRight","messageAudit","list","setList","isModalOpen","setIsModalOpen","form","Form","id","setId","auditContent","setAuditContent","asyncMessageListAction","then","res","data","totalCount","forEach","children","length","ExclamationCircleOutlined","onOk","handleNotDelete","filter","it","_id","message","asyncMessageDeleteAction","setTimeout","setFieldsValue","auditStatus","handleNotAllAudit","open","okText","cancelText","onCancel","resetFields","async","handleNotAudit","validateFields","val","getFieldsValue","asyncMessageStatusUpdateAction","map","audit","handleConfirm","layout","name","rules","required","rowKey","dataSource","scroll","y","x","expandRowByClick","defaultExpandAllRows","pagination","params","asyncCommentsAction","statusPublish","handleNotUpdate","handleNotAdd","onNotChangePublishStatus","onNotChangePublishLineStatus","onNotChangeStatus","handleNotChangeStatus","handleNotSave","handleNotSaveArticle","handleNotSaveDraft","handleNotUpload","handleNotLike"],"sourceRoot":""}